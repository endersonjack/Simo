{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block breadcrumb %}
<div class="row">
    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Financeiro</a></li>
            <li class="breadcrumb-item active" aria-current="page">Contas-Atrasadas</li>
        </ol>
    </nav>
</div>
{% endblock %}

{% block styleHead %}
<style>
.htmx-indicator {
    display:none;
    opacity: 0;
    transition: opacity 200ms ease-in;
}
.htmx-request {
  display:block;
  opacity: 1;
  transition: opacity 200ms ease-in;
}

</style>    
{% endblock %}

{% block conteudo %}

<ul class="nav nav-tabs mb-3" id="myTab">
    <li class="nav-item">
        <a href="{% url 'resumo-do-dia' %}" class="nav-link" >Resumo do Dia</a>
    </li>
    <li class="nav-item">
      <a href="{% url 'inserir-conta-a-pagar' %}" class="nav-link">Nova Conta</a>
  </li>
    <li class="nav-item">
        <a href="#" class="nav-link active"data-bs-toggle="tab">Todas as Contas</a>
    </li>
    <li class="nav-item">
        <a href="#" class="nav-link">Relatórios</a>
    </li>
</ul>
<div class="tab-content">
    <div class="tab-pane fade show active" id="tab-ativa" style="margin-left:2em; margin-right:2em;">

      <form id="form_filtro_contas_atrasadas" style="font-size:9pt;" >
    <div class="d-flex flex-row mb-3" style="font-size:12pt;">
        <div class="m-1"><span class="mt-2"><strong>Filtrar Contas - Situação: </strong></span> </div>
        <div class="form-check m-1">
          <input class="form-check-input" type="checkbox" name="check_nao_pago" id="flexCheckDefault">
          <label class="form-check-label" style="color:red" for="flexCheckDefault"> Não pagos </label>
        </div>
        <div class="form-check m-1">
          <input class="form-check-input" type="checkbox" name="check_pago" id="flexCheckChecked">
          <label class="form-check-label" style="color:green" for="flexCheckChecked"> Pagos </label>
        </div>
    </div>
             
    <div class="">
        <div class="form-group row mb-2 ">
          <div class="col-3">
            <div class="col-12 ">
              <label for="input1" class="">Descrição/Doc/Nota Fiscal</label>
              <input type="text" class="form-control form-control-sm" id="input1" name="descricao" hx-include="#form_filtro_contas_atrasadas" hx-indicator="#spinner" hx-swap="innerHTML" hx-target="#resultados-contas-atrasadas" hx-get="/contas-a-pagar/filtro" hx-trigger="keyup[target.value.length > 2] delay:1s throttle:1s">
            </div>
  
          </div>
          <div class="col-2">
            <div class="col-12">
              <label for="input2" class="">Vencimento/Data Inicial</label>
              <input type="date" class="form-control form-control-sm" id="input2" name="data" hx-include="#form_filtro_contas_atrasadas" hx-indicator="#spinner" hx-swap="innerHTML" hx-target="#resultados-contas-atrasadas" hx-get="/contas-a-pagar/filtro" hx-trigger="change">
            </div>
          </div>
  
          <div class="col-2">
            <div class="col-12">
              <label for="input3" class="">Vencimento/Data Final</label>
              <input type="date" class="form-control form-control-sm" id="input3" name="data_f" hx-include="#form_filtro_contas_atrasadas" hx-indicator="#spinner" hx-swap="innerHTML" hx-target="#resultados-contas-atrasadas" hx-get="/contas-a-pagar/filtro" hx-trigger="change">
            </div>
          </div>
  
          <div class="col-3">
            <div class="col-12">
              <label for="input4" class="">Fornecedor/Razão Social</label>
              <input  type="text" class="form-control form-control-sm " id="input4" name="fornecedor" 
                      hx-include="#form_filtro_contas_atrasadas" 
                      hx-indicator="#spinner" 
                      hx-swap="innerHTML" 
                      hx-target="#resultados-contas-atrasadas" 
                      hx-get="/contas-a-pagar/filtro" 
                      hx-trigger="keyup[target.value.length > 2] delay:1s throttle:1s">
            </div>
          </div>

          <div class="col-1 d-flex align-items-end">
            <button class="btn btn-p-sm btn-secondary m-2" hx-post="{% url 'contas-a-pagar' %}" hx-trigger="click" hx-target="body" hx-swap="outerHTML" disabled>Limpar</button>
          </div>
          <span class="help-block">*Mínimo de 3 letras para buscar</span>
        </div>
  
      </form>
    </div>

    </div>
</div>
<div class="row text-center">
  <img id="spinner" class="htmx-indicator" width="30px" height="30px" src="{% static 'imagens/bars.svg' %}"/>
</div>
<div id="resultados-contas-atrasadas">
  {% include "financeiro/fragmentos/resultados-contas-a-pagar.html" %}
</div>

{% endblock%}
