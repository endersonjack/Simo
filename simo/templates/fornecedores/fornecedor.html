{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}
{% load my_tags %}

{% block breadcrumb %}
<div class="row">
  <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Fornecedores</a></li>
      <li class="breadcrumb-item active" aria-current="page">Detalhar Fornecedor</li>
    </ol>
  </nav>
</div>
{% endblock %}

{% block conteudo %}

<div class="d-flex bd-highlight mb-3">
  <div class="me-auto p-2 bd-highlight">
    <span style="font-size:30px; color:green; margin-top: 5px">Fornecedor - {{fornecedor.nome}}</span>
  </div>

  <div class="ms-auto p-2 bd-highlight">
    <a href="{{ request.META.HTTP_REFERER }}" class="btn btn-light">Voltar</a>
    <a href="{% url 'editar-fornecedor' fornecedor.pk %}" class="btn btn-primary">Editar</a>
    <a href="{% url 'excluir-fornecedor' fornecedor.pk %}" class="btn btn-danger">Excluir</a>
  </div>

</div>
<hr>

<div class="card border-dark mb-3">
  <div class="card-header">Dados do Fornecedor Tipo: {{fornecedor.tipo}}</div>
  <div class="card-body text-dark">
    <ol class="list-group">

      <li class="list-group-item d-flex justify-content-between align-items-start">
        <div class="ms-2 me-auto">
          <div class="fw-bold">Nome</div>
          {{fornecedor.nome}}
        </div>
        <div class="ms-2 me-auto">
          {% if fornecedor.razao_social %}
          <div class="fw-bold">Razão Social</div>
          {{fornecedor.razao_social}}
          {% else %}
          <div class="" style="color:#d9d9d9">Razão Social</div>
          -
          {% endif %}
        </div>
      </li>

      <li class="list-group-item d-flex justify-content-between align-items-start">
        <div class="ms-2 me-auto">
          {% if fornecedor.doc %}
          <div class="fw-bold">CPF/CNPJ</div>
          {{fornecedor.doc}}
          {% else %}
          <div class="" style="color:#d9d9d9">CPF/CNPJ</div>
          -
          {% endif %}
        </div>
        <div class="ms-2 me-auto">
          {% if fornecedor.inscricao %}
          <div class="fw-bold">Inscrição Estadual</div>
          {{fornecedor.inscricao}}
          {% else %}
          <div class="" style="color:#d9d9d9">Inscrição Estadual</div>
          -
          {% endif %}
        </div>
      </li>

      <li class="list-group-item d-flex justify-content-between align-items-start">
        <div class="ms-2 me-auto">
          {% if fornecedor.endereco %}
          <div class="fw-bold">Endereço</div>
          {{fornecedor.endereco}}
          {% else %}
          <div class="" style="color:#d9d9d9">Endereço</div>
          -
          {% endif %}
        </div>
        <div class="ms-2 me-auto">
          {% if fornecedor.telefone1 %}
          <div class="fw-bold">Telefone 1</div>
          {{fornecedor.telefone1}}
          {% else %}
          <div class="" style="color:#d9d9d9">Telefone 1</div>
          -
          {% endif %}
        </div>
        <div class="ms-2 me-auto">
          {% if fornecedor.telefone2 %}
          <div class="fw-bold">Telefone 2</div>
          {{fornecedor.telefone2}}
          {% else %}
          <div class="" style="color:#d9d9d9">Telefone 2</div>
          -
          {% endif %}
        </div>
      </li>

      <li class="list-group-item d-flex justify-content-between align-items-start">
        <div class="ms-2 me-auto">
          {% if fornecedor.email %}
          <div class="fw-bold">Email</div>
          {{fornecedor.email}}
          {% else %}
          <div class="" style="color:#d9d9d9">Email</div>
          -
          {% endif %}
        </div>
      </li>

      <li class="list-group-item d-flex justify-content-between align-items-start">
        <div class="ms-2 me-auto">
          {% if fornecedor.banco %}
          <div class="fw-bold">Banco</div>
          {{fornecedor.banco}}
          {% else %}
          <div class="" style="color:#d9d9d9">Banco</div>
          -
          {% endif %}
        </div>

        <div class="ms-2 me-auto">
          {% if fornecedor.agencia %}
          <div class="fw-bold">Agência</div>
          {{fornecedor.agencia}}
          {% else %}
          <div class="" style="color:#d9d9d9">Agência</div>
          -
          {% endif %}
        </div>

        <div class="ms-2 me-auto">
          {% if fornecedor.conta %}
          <div class="fw-bold">Conta</div>
          {{fornecedor.conta}}
          {% else %}
          <div class="" style="color:#d9d9d9">Conta</div>
          -
          {% endif %}
        </div>

        <div class="ms-2 me-auto">
          {% if fornecedor.conta %}
          <div class="fw-bold">Tipo de Conta</div>
          {{fornecedor.tipo_conta}}
          {% else %}
          <div class="" style="color:#d9d9d9">Tipo de Conta</div>
          -
          {% endif %}
        </div>


      </li>

      <li class="list-group-item d-flex justify-content-between align-items-start">
        <div class="ms-2 me-auto">
          {% if fornecedor.pix %}
          <div class="fw-bold">Pix</div>
          {{fornecedor.pix}}
          {% else %}
          <div class="" style="color:#d9d9d9">Pix</div>
          -
          {% endif %}
        </div>
        <div class="ms-2 me-auto">
          {% if fornecedor.pix %}
          <div class="fw-bold">Tipo PIX</div>
          {{fornecedor.tipo_pix}}
          {% else %}
          <div class="" style="color:#d9d9d9">Tipo PIX</div>
          -
          {% endif %}
        </div>
        <div class="ms-2 me-auto">
          <div class="fw-bold">Faz Nota Fiscal?</div>
          {% if fornecedor.faz_nota %}
          SIM
          {% else %}
          NÃO
          {% endif %}
        </div>
        <div class="ms-2 me-auto">
          {% if fornecedor.obs %}
          <div class="fw-bold">Observação:</div>
          {{fornecedor.obs}}
          {% else %}
          <div class="" style="color:#d9d9d9">Observação:</div>
          -
          {% endif %}
        </div>
      </li>
    </ol>
  </div>
</div>

<div class="row"><span style="font-size:14px; color:green;font-style: italic; margin-top: 30px">Últimos Pagamentos
    Realizados:</span>
  <hr>
</div>

<table class="table table-sm table-bordered dt-responsive tabela-listar" style="font-size:13px">
  <thead
    style="border:solid 2px; border-color:#cb356b ;background: linear-gradient(to right, #00b09b, #006600); color: white;">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Documento</th>
      <th scope="col">Emissão</th>
      <th scope="col">Descrição</th>
      <th scope="col">Fornecedor</th>
      <th scope="col">Centro de Custo</th>
      <th scope="col">Valor Original</th>
      <th scope="col">Valor Pago</th>
      <th scope="col">Data de Pagamento</th>
      <th scope="col">Usuário</th>
    </tr>
  </thead>
  <tbody>
    {% for item in contas_list_pagas %}
    <tr>
      <td>{{forloop.counter}}</td>
      <td>{{item.conta.documento}}</td>
      <td>{{item.conta.data_inclusao}}</td>
      <td>{{item.conta.descricao}}</td>
      {% if item.conta.fornecedor %}
      <td>{{item.conta.fornecedor}}</td>
      {% else %}
      <td> - </td>
      {% endif %}
      <td>{{item.conta.centro_de_custo}}</td>
      <td>{{item.valor_original}}</td>
      <td>{{item.valor}}</td>
      <td>{{item.data}}</td>
      <td>{{item.conta.usuario.username}}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>





{% endblock%}

{% block jquery %}


<script src="{% static 'js/datatables.min.js' %}"></script>
<script>
  $(document).ready(function () {

    $('.tabela-listar').DataTable({
      responsive: true,
      // "bSort": false,
      "aaSorting": [],
      "pageLength": 10,
      "language": {

        "decimal": ",",
        "emptyTable": "Sem dados disponíveis",
        "info": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
        "infoEmpty": "Mostrando de 0 até 0 de 0 registros",
        "infoFiltered": "(filtrado de _MAX_ registros no total)",
        "infoPostFix": "",
        "thousands": ",",
        "lengthMenu": "Mostrar _MENU_ registros",
        "loadingRecords": "A carregar dados...",
        "processing": "A processar...",
        "search": "Procurar:",
        "zeroRecords": "Não foram encontrados resultados",
        "paginate": {
          "first": "Primeiro",
          "last": "Último",
          "next": "Seguinte",
          "previous": "Anterior"
        },
        "aria": {
          "sortAscending": ": ordem crescente",
          "sortDescending": ": ordem decrescente"
        }
      }
    });

  });
</script>

{% endblock %}